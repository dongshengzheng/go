<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ctoangels.go.common.modules.go.mapper.RepairModelItemMapper">

    <!-- 通用查询结果列-->
    <sql id="Base_Column_List">
		id, catagory, code, content, unit, `count`, remark, info, parent_code AS parentCode, `status`, repair_model_id AS repairModelId, create_date AS createDate, create_by AS createBy, update_date AS updateDate, update_by AS updateBy, del_flag AS delFlag, children
	</sql>,.

    <!--根据红本id以及维修项目类型获取items-->
    <select id="byModelIdAndCatagoryContainParams" resultMap="ItemMap">
		SELECT item.* from t_repair_model_item item
		WHERE item.repair_model_id=#{0} and item.catagory=#{1} and del_flag=0
		Order by item.code
	</select>

    <resultMap id="ItemMap" type="RepairModelItem">
        <result property="id" column="id"></result>
        <result property="code" column="code"></result>
        <collection property="paramList" column="{model_id=repair_model_id,code=code}" ofType="Param"
                    select="com.ctoangels.go.common.modules.go.mapper.ParamMapper.byItemCodeContainParamValue"/>
    </resultMap>

</mapper>